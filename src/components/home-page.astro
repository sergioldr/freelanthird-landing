---
import { getLangFromUrl, getLocalizedPath, useTranslations } from '../i18n/utils';
import AvailableForWork from "./available.astro";
import Link from "./link.astro";
import Navigation from "./navigation";
import TitleAnimation from './title-animation';
import HeroAccordion from './hero-accordion';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const accordionItems = [
  { title: String(t('hero.launch')), description: String(t('hero.launch.desc')) },
  { title: String(t('hero.scale')), description: String(t('hero.scale.desc')) },
  { title: String(t('hero.monetize')), description: String(t('hero.monetize.desc')) },
];
---

<div class="group relative w-full min-h-dvh flex items-center justify-center">
	<!-- Centered TitleAnimation -->
	<div class="absolute inset-0 flex items-start sm:items-center justify-center p-2 z-20 pointer-events-none">
		<div class="pointer-events-auto">
			<TitleAnimation client:load />
		</div>
	</div>

	<!-- Mobile Menu Text -->
	<div class="absolute inset-0 flex items-center justify-center z-30 px-6 my-50 sm:hidden">
		<HeroAccordion client:load items={accordionItems} />
	</div>
	
	<div class="p-4 sm:p-8 absolute w-full h-dvh flex flex-col justify-between z-10">
		<div class="flex items-center justify-between">
			<!-- Empty div to maintain layout structure -->
			<div></div>
		</div>
		<div>
			<AvailableForWork className="py-4" text={String(t('hero.available'))} />
			<div class="mb-2 sm:mb-4 flex items-center justify-between">
				<div class="flex items-center gap-4">
					<Link href="https://cal.com/freelanthird/30min">{t('hero.bookCall')}</Link>
					<Link href={getLocalizedPath(lang, 'projects')} variant="secondary">{t('hero.viewWork')}</Link>
				</div>

				<Navigation 
					client:load
					lang={lang}
				>
					<Link href={getLocalizedPath(lang, 'projects')} variant="secondary">{t('nav.projects')}</Link>
					<Link href={getLocalizedPath(lang, 'about')} variant="secondary">{t('nav.about')}</Link>
					<Link href={getLocalizedPath(lang, 'contact')} variant="secondary">{t('nav.contact')}</Link>
				</Navigation>
			</div>
		</div>
	</div>
</div>
